source "http://rubygems.org"

CARD_MODS_REPO_DIR = "#{Dir.home}/card-mods"
DECKO_REPO_DIR = "#{CARD_MODS_REPO_DIR}/.semaphore/decko"

def card_mods_in dir, glob
  Dir.chdir dir do
    Dir.glob(glob).each do |mod|
      mod = "card-mod-#{mod}" unless mod.match?(/^card-mod/)
      gem mod
    end
  end
end

path DECKO_REPO_DIR do
  gem "decko"
  gem "card", require: false
  gem "cardname"
end

gem "mysql2", '~> 0.5'
gem "thin"

path "#{DECKO_REPO_DIR}/mod" do
  card_mods_in "#{DECKO_REPO_DIR}/mod", "*"
end

path "#{DECKO_REPO_DIR}/support" do
  gem "decko-rspec", group: :test
  gem "decko-cypress", group: :cypress
end

path CARD_MODS_REPO_DIR do
  card_mods_in CARD_MODS_REPO_DIR, "card-mod-*"
end
