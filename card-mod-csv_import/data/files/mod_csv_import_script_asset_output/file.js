// import_map.js.coffee
(function(){var t,n,e,i,r,a,o,c,u,s,m,d,p,f,h,l,v,g,_,b,k,w;$(document).ready(function(){return $("body").on("click","._import-map-status-option",function(t){var n,e;return n=$(this),e=n.data("status"),u(n).find("#_import-map-item-checkbox:visible").each(function(){return b($(this),e)}),t.preventDefault()}),$("body").on("click","._import-map-action-option",function(t){var e,r;switch(e=$(this).data("action"),r=u($(this)),!1){case"show"!==e:v(r);break;case"showonly"!==e:i(r,":not(:checked)",a);break;default:i(r,":checked",n[e])}return t.preventDefault()}),$("body").on("click","._create-import-item",function(){return _($(this),e)}),$("body").on("click","._save-mapping",function(){return $(".tab-pane-import_status_tab").html(""),$(".page-view > .tabbable > .nav > .nav-item:nth-child(2) > .nav-link").addClass("load")}),$("body").on("decko.filter.selection","._suggest-link",function(t,n){var e;return e=$(n.firstChild).data(),f($(this),e.cardName)}),$("body").on("click","._suggest-import-item",function(){return _($(this),t)}),m()}),_=function(t,n){return t.hasClass("active")?n(t):h(t)},i=function(t,n,e){return t.find("#_import-map-item-checkbox"+n).each(function(){return e($(this).closest("._import-map-item"))})},v=function(t){return t.find("._import-map-item").show()},c=function(t){return o(t).find("._import-mapping")},d=function(t){return o(t).find("._mapping-label")},l=function(t){return o(t).find("._saved-mapping")},u=function(t){return t.closest(".tab-pane").find("._import-table")},o=function(t,n){return t.closest("._import-map-item"+(n||""))},r=function(t,n){return o(t,"[data-status='"+n+"']").length>0},b=function(t,n){var e;return e=function(){switch(!1){case"all"!==n:return!0;case"none"!==n:return!1;default:return r(t,n)}}(),t.prop("checked",e)},p=function(t){return o(t).find("._item-name-in-import-file").text()},w=function(t,n){var e;return(e=o(t)).attr("data-status",n),e.find("._import-map-status-label").text(g[n])},k=function(t,n,e){var i;return(i=d(t)).html("<strong>"+n+"</strong>: "+e),i.show()},f=function(t,n){return c(t).val(n),l(t).hide(),k(t,"New Match",n),w(t,"matched")},t=function(t){var n;return n=t.closest("._import-map-suggestion").data("cardname"),f(t,n)},n={hide:a=function(t){return t.find("#_import-map-item-checkbox").prop("checked",!1),t.hide()},create:e=function(t){return c(t).val("AutoAdd"),l(t).hide(),k(t,"Create",p(t)),w(t,"matched")},reset:h=function(t){var n;return n=o(t),l(t).show(),d(t).hide(),w(t,n.data("savedstatus")),c(t).val(n.data("savedmapping")),n.find("._create-import-item, ._suggest-import-item").removeClass("active")},accept:function(n){var e;return e=o(n).find("._import-map-suggestion")[0],t($(e))}},g={matched:"Match",suggested:"Pending",unmatched:"No Match"},m=function(){return $.each($("._import-mapping-suggestions"),function(){var t;return t=$(this),$.ajax({url:t.data("url"),success:function(n){return s(t,n)},error:function(){return t.html(":(")}})})},s=function(t,n){return n?(t.html(n),w(t,"suggested")):t.html("--")}}).call(this);
// import_status.js.coffee
(function(){var t;$(document).ready(function(){return $("body").on("click","._import-status-form ._check-all",function(){var o;return o=$(this).is(":checked"),t($(this).closest("._import-status-form"),o)}),$("body").on("click","._import-status-refresh",function(){var t,o;return t=(o=$(this).slot()).find(".nav-link.active").data("tab-name"),o.slotReload(o.slotUrl()+"&tab="+t)})}),t=function(t,o){return t.find("._import-row-checkbox").prop("checked",o)}}).call(this);